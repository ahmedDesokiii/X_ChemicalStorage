@model LotViewModel
@{
    int cNo = 0;
}


<!-- Modal -->
<div class="modal fade bd-example-modal-lg" id="ListItemsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" dir="ltr">
    <div class="modal-dialog modal-lg card card-success card-outline">
        <div class="modal-content">
            <div class="modal-header" style="background-color:#758A93" dir="ltr">
                <span class="fs-4 fw-bold modal-title" id="">Items List</span>
                <a href="#" class="btn-close position-absolute  end-0 mx-3" data-bs-dismiss="modal" aria-label="Close"></a>
            </div>
            <div class="modal-body">
                @if (!Model.ItemsList.Any())
                {
                    <div class="alert  alert-warning mt-5">
                        <h4 class="alert-heading">No Items</h4>
                        <p class="mb-0">No Items have been added to the app yet.</p>
                    </div>
                }
                else
                {
                    <div id="Permissions" class="tabcontent mx-2">
                        <table class="table table-hover display nowrap  px-0 table-bordered border-primary-subtle" id="tablePermissions">
                            <thead>
                                <tr class="text-center">
                                    <th class=" text-white text-center fs-5" style="background-color:#0C7779 !important;">Barcode</th>
                                    <th class=" text-white text-center fs-5" style="background-color:#0C7779 !important;">Name</th>
                                    <th class=" text-white text-center fs-5" style="background-color:#0C7779 !important;">SDS</th>
                                    <th class=" text-white text-center fs-5" style="background-color:#0C7779 !important;">Category</th>                                    
                                    <th class=" text-white text-center fs-6" style="background-color:#0C7779 !important;">Storage<br class="m-0 p-0">Condition</th>
                                    <th class=" text-white text-center fs-5" style="background-color:#0C7779 !important;">Location</th>
                                    <th class=" text-white text-center fs-5" style="color:#415E72 !important ; background-color:#0C7779 !important;">Actions</th>

                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.ItemsList)
                                {
                                    cNo++;
                                    <tr class="text-center ">
                                        <td class="fs-6 text-center py-0 px-1 my-auto">
                                            <span class="link-dark fw-bold fs-6"> <img src="@item.BarcodeImage" /></span>
                                            <hr class="p-0 m-0">
                                            <span class="link-dark " style="font-size:10px">@item.Code</span>
                                        </td>
                                        <td class="fs-6 text-center py-1 px-1 ">
                                            <span class="link-primary fw-bold">@item.Name</span>
                                        </td>
                                        @if (item.SDS == true)
                                        {
                                            <td class="text-center ">
                                                <span class="fw-bold py-2 px-3 bg-success-subtle link-success rounded-5">
                                                    Valid
                                                </span>
                                            </td>
                                        }
                                        else
                                        {
                                            <td class="text-center ">
                                                <span class="fw-bold py-2 px-3 bg-danger-subtle link-danger rounded-5">
                                                    Invalid
                                                </span>
                                            </td>
                                        }
                                        <td class="fs-6 text-center px-1">@item.Category.Name</td>

                                        @if (item.StorageCondition == "room temp")
                                        {
                                            <td class=" text-start px-1 py-0"><span class="link-dark fw-bold px-3"><i class="bi bi-thermometer-half link-danger fs-3 px-1"></i>@item.StorageCondition</span></td>
                                        }
                                        else if (item.StorageCondition == "2-8C")
                                        {
                                            <td class=" text-start px-1 py-0"><span class="link-dark fw-bold px-3"><i class="bi bi-thermometer-half link-success fs-3 px-1"></i>@item.StorageCondition</span></td>
                                        }
                                        else
                                        {
                                            <td class=" text-start px-1 py-0"><span class="link-dark fw-bold px-3"><i class="bi bi-thermometer-half link-info fs-3 px-1"></i>@item.StorageCondition</span></td>
                                        }
                                        <td class="fs-6 text-center px-1">
                                            <a class="link-dark fw-bold text-decoration-none" title="Storage Details" asp-controller="Items" asp-action="SelectedItem" asp-route-Id="@item.Id">
                                                @item.Location.LocationName
                                            </a>
                                        </td>

                                        <td class="py-1">
                                            @if (AuthorizationService.AuthorizeAsync(User, Permissions.Lots.Create_Lots).Result.Succeeded)
                                            {
                                                <a class="btn fw-bold btn-outline-dark bg-transparent border-0 text-center p-0 mx-1 fs-5" title="Add New Lot" asp-controller="Items" asp-action="CreateLot" asp-route-Id="@item.Id"><i class="bi bi-cart-plus-fill fs-2"></i><br></a>
                                            }
                                            
                                        </td>
                                    </tr>
                                }

                            </tbody>
                        </table>
                    </div>
                }

            </div>

        </div>
    </div>
</div>

